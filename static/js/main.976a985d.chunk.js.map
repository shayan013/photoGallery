{"version":3,"sources":["components/Title.js","firebase/config.js","components/hooks/useFirestore.js","components/Imagegallery.js","components/hooks/useStorage.js","components/Progress.js","components/Uploadfrom.js","App.js","index.js"],"names":["Title","className","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","projectStorage","storage","projectFirestore","firestore","timestamp","FieldValue","serverTimestamp","useFirestore","collection","useState","docs","setDocs","useEffect","orderBy","onSnapshot","each_data","images_data","forEach","doc","push","data","id","Imagegallery","map","image","key","src","url","alt","useStorage","file","progress","setProgress","error","setError","setUrl","storageRef","ref","name","collectionRef","put","on","snap","percentage","bytesTransferred","totalBytes","a","getDownloadURL","createdAt","add","Progress","setFile","console","log","style","width","Uploadfrom","types","htmlFor","type","onChange","e","selected","target","files","includes","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.976a985d.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Title = () => {\r\n  return (\r\n    <div className=\"title\">\r\n      <h2>Picture Gallery</h2>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import firebase from \"firebase/compat/app\";\r\nimport \"firebase/compat/storage\";\r\nimport \"firebase/compat/firestore\";\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAES0pVLB1XlEd5hxijhg8pHnkpGFDDDJA\",\r\n  authDomain: \"photogallery-ff74a.firebaseapp.com\",\r\n  projectId: \"photogallery-ff74a\",\r\n  storageBucket: \"photogallery-ff74a.appspot.com\",\r\n  messagingSenderId: \"170260487952\",\r\n  appId: \"1:170260487952:web:af9173a04c52c2ba6e4f95\",\r\n};\r\n\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nconst projectStorage = firebase.storage();\r\nconst projectFirestore = firebase.firestore();\r\nconst timestamp = firebase.firestore.FieldValue.serverTimestamp;\r\nexport { projectFirestore, projectStorage, timestamp };\r\n","import { useState, useEffect } from \"react\";\r\nimport { projectFirestore } from \"../../firebase/config\";\r\n\r\nconst useFirestore = (collection) => {\r\n  const [docs, setDocs] = useState([]);\r\n  useEffect(() => {\r\n    projectFirestore\r\n      .collection(collection)\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .onSnapshot((each_data) => {\r\n        const images_data = [];\r\n\r\n        each_data.forEach((doc) => {\r\n          images_data.push({ ...doc.data(), id: doc.id });\r\n        });\r\n        setDocs(images_data);\r\n      });\r\n  }, [collection]);\r\n  return { docs };\r\n};\r\n\r\nexport default useFirestore;\r\n","import React from \"react\";\r\nimport useFirestore from \"./hooks/useFirestore\";\r\nfunction Imagegallery() {\r\n  const { docs } = useFirestore(\"images\");\r\n\r\n  return (\r\n    <div className=\"img-grid\">\r\n      {docs.map((image) => (\r\n        <div className=\"img-wrap\" key={image.id}>\r\n          <img src={image.url} alt=\"\" />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Imagegallery;\r\n","import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  projectStorage,\r\n  projectFirestore,\r\n  timestamp,\r\n} from \"../../firebase/config\";\r\nfunction useStorage(file) {\r\n  const [progress, setProgress] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [url, setUrl] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const storageRef = projectStorage.ref(`images/${file.name}`);\r\n    const collectionRef = projectFirestore.collection(\"images\");\r\n    storageRef.put(file).on(\r\n      \"state_changed\",\r\n      (snap) => {\r\n        const percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n        setProgress(percentage);\r\n      },\r\n      (error) => {\r\n        setError(error);\r\n      },\r\n      async () => {\r\n        const url = await storageRef.getDownloadURL();\r\n        setUrl(url);\r\n        const createdAt = timestamp();\r\n        collectionRef.add({ url, createdAt });\r\n      }\r\n    );\r\n  }, [file]);\r\n  return { progress, error, url };\r\n}\r\n\r\nexport default useStorage;\r\n","import React from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport useStorage from \"./hooks/useStorage\";\r\nfunction Progress({ file, setFile }) {\r\n  const { progress, url } = useStorage(file);\r\n  console.log(progress, url);\r\n  useEffect(() => {\r\n    if (url) {\r\n      setFile(null);\r\n      console.log(\"file uploaded\");\r\n    }\r\n  }, [url]);\r\n  return <div className=\"progress-bar\" style={{ width: progress + \"%\" }}></div>;\r\n}\r\n\r\nexport default Progress;\r\n","import React from \"react\";\r\nimport \"./uploadform.css\";\r\nimport { useState } from \"react\";\r\nimport Progress from \"./Progress\";\r\nfunction Uploadfrom() {\r\n  const types = [\"image/jpeg\", \"image/png\"];\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const fileChange = (e) => {\r\n    let selected = e.target.files[0];\r\n    console.log(e.target.files[0]);\r\n    if (selected && types.includes(selected.type)) {\r\n      setFile(selected);\r\n      setError(\"\");\r\n    } else {\r\n      setFile(null);\r\n      setError(\"please select correct type i.e png or jpeg\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <label htmlFor=\"\">\r\n        <input type=\"file\" onChange={fileChange} />\r\n      </label>\r\n\r\n      <div className=\"output\">\r\n        {error && <div className=\"error\">{error}</div>}\r\n        {file && <div>{file.name}</div>}\r\n        {file && <Progress file={file} setFile={setFile} />}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Uploadfrom;\r\n","import React from \"react\";\r\nimport Title from \"./components/Title\";\r\nimport Imagegallery from \"./components/Imagegallery\";\r\nimport Main from \"./components/Main\";\r\nimport Uploadfrom from \"./components/Uploadfrom\";\r\nimport \"./app.css\";\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Title />\r\n      <Uploadfrom />\r\n      <Imagegallery />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA"],"sourceRoot":""}